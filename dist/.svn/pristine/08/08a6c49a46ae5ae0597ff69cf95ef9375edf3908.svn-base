webpackJsonp([3],{"BCZ/":function(t,e){},CZUd:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAABOCAMAAABxGDr5AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABjUExURUxpcfyLPv/fyP/gy/yLPv6rdf2NQvyMQfyNQv2fYf7bw//eyP2NQv/dxv/awv2RR/2MQP/hzP2MP/6OQfyNQfyMQP2NQf69kfyNQv7dxvyHOP/k0v7XvP2WUf7Rsv20gf7FnpABYysAAAAYdFJOUwDjTd0oGNlM8wu/b5iJL12+nWx6p4eRk6PgLokAAAM6SURBVFjD1ZmLcqsgEIbRqFwU8ZKLiWnS93/KAt7AsKfGwJnpP3XGpPCJu8suEIS8iMY5z1MURGnM2VUrD8j2/4Ayrw/XlUpP5naxlbgPk+TMyVZin5sbZGvR/ea2XQko9uZKt/KA7LcdQJUr+7d02OJFLWnux/1tXXE6CXB1k3Wf6DbfRcfEMfZqbngb/vS13P16mcIvs/J563wqsWdl/+0X3x2HMJlmZe95+F0k8XwJb+98glBtzI4A/Pgals8C869/nB/aPvz6t+MnDcy3HPAf5u+i19S+WUsfZDnAOf6hSxRF22vMzRi/5YD7YxTjeZmMkpWOluLCHht1Z+nUVeV/c3Uw1Og6L1+WEG9Veau36YADy2Nqr6pq1r8ta3i5wdZbBDooVez7HvWXCaHGWiq2NIm6b6JF5Gu3uomRqeHyxdynffEIB+hqeXLyP7/MxffhGYg/7qP6IHw6ryDC8JcZFojP3XxCiB9+7OZHMn/YSU1grL+IMBbTChDPEk1FnPwUsI/MTmfzcyWb6hs5bej43cmK7+TojB/m5svVaWINH6Ghf0bnfxTyUYneTyQ6cVUuPnfzieyRWR8pcfAbMkhvKFLi4MdA/DQItdbrNJ2DvzSJ0ukNbX4J8DPLQHh+m9X4lyYtQsI1fw9A/CeGQY2HgXz5itjFrwH+2egtx1b8xi+A8ecAX7o0Xd6Fkt/4YpXiJ34J5QcxG6gyQJB/1XYrc+ZnaP9VzS8sjK42X2Ra1VE2sc2z8Gsov01WIdQIJZuP6HipCUzc/Bzit2NEH81cseIvJaolQP0qIX42RhxevLvmJ+2g4iW9GfURzP9yVkV6I2tYdmX/LfWXQfyjDvuTlblsPt7CzyE+SRUgsTLpDn4M1keZ5JR5zp/xKciXHq4KRKPP+AhenyQIY9uJe/gc5BcvdWkPPwb5qlGyNplRf7fxU3j9UzTCLqtR20xpshLivG39yYKtr2YHBOXHgflpYL6sMWH5tf/zyWq1key//D7AOsCVNaZ/dDePT2jt3Z0s8v392d3+dcjxhjKx2j3qFNQ/vmexi8C79Xp6Tg/zGUTfMx6X3n+OY+NJAY8D/ZgYcz6cFHjSD1cNAN5p08sVAAAAAElFTkSuQmCC"},hcCh:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAABSCAMAAAAionnxAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAB+UExURUxpcVl2yHuS1MLO7T1fvvD1/Zms3v///93l9zhavUtqw0FiwEhowkpqwzdZvEpqw+br+Etrw3iQ05Ck205txZqt39zl9////+nw++70/eTr+URlwSpPuIGY1nKL0ff5/TdavdXf9ExrxFd1yLvJ64+j26++5mWAzaGz4cnV8EZ8GboAAAAWdFJOUwB2dnP+c3Nzc3G0WezdOs98lru0H6p1rE34AAAEW0lEQVRYw+2Zi5KqOBCGBwmKCDo6nhgSIHKH93/B04SLkISLM1O1W1v7T1llofPZSXeH7ubjQ+hsXB2NLpKc6+n+sa779eIi9NQITfREruecV3Enhz1ZWkYahaDo9VcmCF2MNZyHUFlldawTjvFIcREy5C4DzxfE8pj4U/GHEJcu+7hKkHta2juHsZxygqeihAqRqYGU+wC8LDjl5KIIc5mGs6pVJn2COclRsmCgg9KMU+mf/LoMGt8+g7L2pZ/y6xQ58wZ6KIp9vJ2HCQ2RNx80LsqpwqM0y1tlVLadkJwteMQFb5DWAz4Z5PPWs3ziYNLyKsbWeYRq4y+uR8Kk5xlr6yVxNUmMUqewJnTVPsEjNGfBqp4hWLiBB18Ch6a65H0pD+Er4O2NvDSAH5+q8ccoA0kOPPIGz38siudv2kf+5ym8zh/Xk6Lz/X1eknU8x1B1FPeqV/yt8qrnwPsyhWzb7N7AayeAHS9+j/fHPnSyBtkAHPLtTd4XWLZvZL90AOBZtY9rpPIs0zg2Mq2BZ8G1k8LDhUY1l9dr2XtjBzKtEdBWeXWJmCKUFFzeP0tWw9sdJR4JAw2PBWU85d32skwtj0YBS1QFqcRzjrLEyhUeL1Cgq4sqf8U+47jX8R6kCFXlBVX8cZhqN8MDIiXKuaqJl828tXimpEjY1+d/hden2GQH+Spv3/M8FOLReeBX3X1ycnPP8QrPmuHxCkk1uKjDu89evJs5kjVvn8gPkWKz+SF4k/N5Z8/yIH+19kVY4k1yzZzfv7psLEunSsrsscAz9PZFdDj/Mkmx7N9J/tqHBd734s/6Zd7P7RudzD+yj7b7t9vvBjUB+D0eKzreerxEv8vDb/JeqzWMvfVj3s0cFwaHH/NW4++HvG/ZV6DftW+BJ+w7/Mvt+4d5jxHvtoW3cv99ZB0vSzfxyrqd2cyqQqha4k38GwasbZrTWbHu/NPzdmMebEq63k+zHPc8W9LAu6CwmZdQmg3V3qwKTHHLU/qjY79/l27+AlUf7UZMIEqglRavVzUI1yie4xn7rn7ueT2wpRJOmglMQXn/K0K4593aXmvot5q3Em86tMFiPsHCmiiznnb/Dpa528GtV+4XtDzAPQOWJkEQxkTL+4SMbap6+9XOLPD8AlqOLM6iAFU+1fJM8AD0XGPgLI9QaHULaNsyMfXQrhcK0sPBhNplCw+iu4w55U0WxnqeSIitvM4+LuybX2/XxUx5z9n9w9r9I/Ah2KfzR9OvNvNJvX+TMn2qy23mfyhp+ksRL5bcTxtQ4BPVwFjEHwqV8STm0NJ6n00V1L6kfv9+AQMfVAHSIozCCsurxZyEKJmU45323YADDCxr7qtjTYq7jB37gkP3htyrdlzSTmDuV4bKjMqDa9HDNGfC5CKtQ4Y846xTP/M9O9DQh0WtKFNU5CUC3MoA/3z1EEpSZbypntAJQq5zWn9ecXI8F22Q612MLQ9AgKh5nnJVZKw+TvkL14TXkKFhHVIAAAAASUVORK5CYII="},hiPH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("3cXf"),a=s.n(i),n=s("0xDb"),o=s("tHyW"),c=s("+vOg"),r={name:"Clearing",inject:["rootMain"],components:{"slide-sub":o.a},data:function(){return{memberShow:!1,show:!1,member:{tip:"当前为普通收款，我要切换为",btn:"会员到店",type:1,id:null,name:"张某某",phone:"18751234562"},modelData:{card:null,phone:null,verif:null},phoneRex:/^[1]{1}[34578]{1}[0-9]{9}$/,codeText:"验证码",codeDisabled:!1,sureButton:!1,infoStyle:{},posId:0}},computed:{cartList:function(){return this.$store.getters["cartModule/getAllCart"]},allPrice:function(){var t=0;return this.cartList.length>0&&(t=this.cartList.reduce(function(t,e){return t+e.count*Number(Object(n.p)(e.price))},0)),Object(n.c)(Object(n.p)(t))},orderData:function(){var t=[];return this.cartList.length>0&&this.cartList.map(function(e){t.push([e.id,e.count])}),a()(t)}},mounted:function(){var t=this.$refs.footerEl?this.$refs.footerEl.offsetHeight+20:74;t=t+.5|0,this.infoStyle={"padding-bottom":t+"px"}},methods:{chooseType:function(t){var e=this;this.show=!1,2==t?Object(n.k)(function(t){e.modelData.card=t,e.useCardGetInfo({card:e.modelData.card})}):this.openMemberModal()},openModal:function(){this.show=!0},closeModal:function(t){t()},openMemberModal:function(){this.memberShow=!0},closeMemberModal:function(){this.memberShow=!1,this.modelData={card:null,phone:null,verif:null},this.sureButton=!1},changeType:function(){var t={};1==this.member.type?this.openModal():(t.tip="当前为普通收款，我要切换为",t.btn="会员到店",t.type=1),this.member=Object(n.i)(!0,this.member,t)},validatePhone:function(){return this.modelData.phone?!!this.phoneRex.test(this.modelData.phone)||(Object(n.e)({msg:"手机号格式不对！",class:"danger",time:2e3}),!1):(Object(n.e)({msg:"请输入您的手机号！",class:"danger",time:2e3}),!1)},sendCode:function(){var t=this;this.validatePhone()&&(new c.b).sendCode(this.modelData.phone).then(function(e){Object(n.e)({msg:"验证码已发送",class:"success",time:2e3}),t.sureButton=!0,t.codeDisabled=!0;var s=60,i=setInterval(function(){s--,t.codeText=s+"s",(s<0||!t.memberShow)&&(t.codeText="验证码",t.codeDisabled=!1,clearInterval(i))},1e3)},function(t){Object(n.e)({msg:"网络请求错误",class:"success",time:2e3})})},usePhoneGetInfo:function(){if(this.validatePhone())return this.modelData.verif?void this.useCardGetInfo({phone:this.modelData.phone,code:this.modelData.verif}):(Object(n.e)({msg:"请输入验证码",class:"danger",time:2e3}),!1)},useCardGetInfo:function(t){var e=this;(new c.b).getInfo(t).then(function(t){e.member.tip="欢迎会员"+t.data.name+"到店",e.member.btn="普通收款",e.member.type=2,e.member.id=t.data.id,e.member.name=t.data.name,e.member.phone=t.data.phone,e.closeMemberModal()},function(t){Object(n.e)({msg:"网络请求错误",class:"success",time:2e3})})},creatOrder:function(){var t=this;if(this.posId=Object(n.l)(),this.posId){var e=new c.c;this.rootMain.loader(!0);var s={};2==this.member.type&&(s.good_xuid=this.member.id),s.posid=this.posId,s.order_data=this.orderData,e.create(s).then(function(e){t.rootMain.loader(!1),Object(n.m)(e.data.info.orderno,t.allPrice,2==t.type)},function(e){t.rootMain.loader(!1)})}}},beforeRouteLeave:function(t,e,s){Object(n.d)({title:"提示",theme:"accent",content:"确认离开？",shadeClick:!1,showClose:!1},function(t){t.close(),s()},function(t){s(!1)})},watch:{"modelData.phone":function(t,e){var s=(""+t).replace(/\D/g,"");s.length>11&&(s=s.substr(0,11)),this.modelData.phone=s}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"nav",rawName:"v-nav",value:t.$route.meta,expression:"$route.meta"}],staticClass:"ask-view"},[i("div",{staticClass:"ask-view-box",style:t.infoStyle},[i("header",{staticClass:"ms-clearing-header"},[i("div",{staticClass:"ms-chbar"},[i("div",{staticClass:"text",domProps:{textContent:t._s(t.member.tip)}}),t._v(" "),i("div",{staticClass:"btn"},[i("ask-button",{attrs:{hover:!1,text:t.member.btn},nativeOn:{click:function(e){t.changeType(e)}}})],1)]),t._v(" "),i("slide-sub",{staticClass:"ms-chinfo",attrs:{show:2==t.member.type}},[i("div",{staticClass:"ms-chonce"},[i("div",{staticClass:"name"},[t._v("姓名：")]),t._v(" "),i("div",{staticClass:"value",domProps:{textContent:t._s(t.member.name)}})]),t._v(" "),i("div",{staticClass:"ms-chonce"},[i("div",{staticClass:"name"},[t._v("电话：")]),t._v(" "),i("div",{staticClass:"value",domProps:{textContent:t._s(t.member.phone)}})])])],1),t._v(" "),i("section",{staticClass:"ms-clearing-body"},[t._m(0),t._v(" "),i("div",{staticClass:"ms-cbinfo"},[t._l(t.cartList,function(e,s){return[i("div",{staticClass:"ms-cbgroup"},[i("div",{staticClass:"cover"},[i("div",{staticClass:"cover-box"},[i("img",{attrs:{src:e.pic,alt:"封面图"}})])]),t._v(" "),i("div",{staticClass:"detail"},[i("div",{staticClass:"title"},[t._v("全进口澳大利亚风味牛肉粒全进口澳大利亚风味牛肉粒")]),t._v(" "),i("div",{staticClass:"other"},[i("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),t._v(" "),i("div",{staticClass:"num"},[t._v("x"+t._s(e.count))])])])])]})],2),t._v(" "),i("div",{staticClass:"ms-cbfooter"},[i("div",{staticClass:"ms-cbtext"},[t._v("共"+t._s(t.cartList.length)+"件商品")]),t._v(" "),i("div",{staticClass:"ms-cbtext large"},[t._v("合计:\n\t\t\t\t\t"),i("span",[t._v("￥"+t._s(t.allPrice))])])])])]),t._v(" "),i("footer",{ref:"footerEl",staticClass:"ms-clearing-footer"},[i("div",{staticClass:"price"},[t._v("\n\t\t\t合计:\n\t\t\t"),i("span",[i("i",[t._v("￥")]),t._v(t._s(t.allPrice.split(".")[0])),i("i",[t._v("."+t._s(t.allPrice.split(".")[1]))])])]),t._v(" "),i("ask-button",{attrs:{hover:!1,text:"结算"},nativeOn:{click:function(e){t.creatOrder(e)}}})],1),t._v(" "),i("ask-modal",{staticClass:"member-clearing",attrs:{show:t.show,title:"",showFooter:!1,showHeader:!1,beforeClose:t.closeModal},on:{"update:show":function(e){t.show=e}}},[i("div",{staticClass:"mc-box"},[i("div",{staticClass:"mc-once",on:{click:function(e){t.chooseType(1)}}},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:s("hcCh"),alt:"图标"}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("会员手机")])]),t._v(" "),i("div",{staticClass:"mc-once",on:{click:function(e){t.chooseType(2)}}},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:s("CZUd"),alt:"图标"}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("会员卡")])])])]),t._v(" "),i("ask-modal",{staticClass:"member-info",attrs:{show:t.memberShow,title:"",showFooter:!1,showHeader:!1},on:{"update:show":function(e){t.memberShow=e}}},[i("div",{staticClass:"mi-box"},[i("div",{staticClass:"mi-once"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.modelData.phone,expression:"modelData.phone"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.modelData.phone},on:{input:function(e){e.target.composing||t.$set(t.modelData,"phone",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"mi-once"},[i("ask-button",{staticClass:"verif",attrs:{hover:!1,text:t.codeText,disabled:t.codeDisabled},nativeOn:{click:function(e){t.sendCode(e)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.modelData.verif,expression:"modelData.verif"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.modelData.verif},on:{input:function(e){e.target.composing||t.$set(t.modelData,"verif",e.target.value)}}})],1),t._v(" "),i("div",{staticClass:"mi-once btn"},[i("ask-button",{directives:[{name:"show",rawName:"v-show",value:t.sureButton,expression:"sureButton"}],attrs:{hover:!1,text:"确定"},nativeOn:{click:function(e){t.usePhoneGetInfo(e)}}}),t._v(" "),i("ask-button",{attrs:{hover:!1,text:"取消"},nativeOn:{click:function(e){t.closeMemberModal(e)}}})],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ms-cbtitle"},[e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont icon-dianpu"})]),this._v(" "),e("div",{staticClass:"name"},[this._v("苏银商户")])])}]};var d=s("X4nt")(r,l,!1,function(t){s("BCZ/")},null,null);e.default=d.exports},tHyW:function(t,e,s){"use strict";var i={name:"SlideSub",props:{show:!1},mounted:function(){if(this.show){var t=this.$el.querySelector(".slide-sub-info").offsetHeight;this.$el.style.height=t+"px"}},methods:{beforeEnter:function(t){t.style.height="0px"},enter:function(t,e){var s=t.querySelector(".slide-sub-info").offsetHeight;t.style.height=s+"px",e()},beforeLeave:function(t){var e=t.querySelector(".slide-sub-info").offsetHeight;t.style.height=e+"px"},leave:function(t,e){t.style.height="0px",setTimeout(function(){e()},300)}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{on:{"before-enter":this.beforeEnter,enter:this.enter,"before-leave":this.beforeLeave,leave:this.leave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"slide-sub"},[e("div",{staticClass:"slide-sub-info"},[this._t("default")],2)])])},staticRenderFns:[]};var n=s("X4nt")(i,a,!1,function(t){s("tU4u")},null,null);e.a=n.exports},tU4u:function(t,e){}});